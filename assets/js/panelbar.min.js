function PBPreviewInitEdit(e,n){var a=e.contents();setTimeout(function(){a.find(".topbar").hide(),a.find("body").css({"margin-top":"-48px"}),a.find(".btn-submit").on("click",function(){setTimeout(function(){n.attr("src",n.attr("src")),PBPreviewInitEdit(e,n)},200)})},200)}var hasClass=function(e,n){return new RegExp(" "+n+" ").test(" "+e.className+" ")},addClass=function(e,n){hasClass(e,n)||(e.className+=" "+n)},removeClass=function(e,n){var a=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(hasClass(e,n)){for(;a.indexOf(" "+n+" ")>=0;)a=a.replace(" "+n+" "," ");e.className=a.replace(/^\s+|\s+$/g,"")}},panelbar=document.getElementById("panelbar"),controls=document.getElementById("panelbar_controls"),switchbtn=document.getElementById("panelbar_switch"),flipbtn=document.getElementById("panelbar_flip");"querySelector"in document&&"addEventListener"in window?(switchbtn.addEventListener("click",function(){hasClass(panelbar,"hidden")?removeClass(panelbar,"hidden"):addClass(panelbar,"hidden")}),flipbtn.addEventListener("click",function(){hasClass(panelbar,"top")?removeClass(panelbar,"top"):addClass(panelbar,"top"),hasClass(panelbar,"bottom")?removeClass(panelbar,"bottom"):addClass(panelbar,"bottom")})):(controls.remove(),panelbar.style.paddingRight=0,panelbar.classList.remove("hidden")),window.jQuery&&enhancedJS===!0&&$(function(){$(".panelbar--toggle > a").on("click",function(e){e.preventDefault();var n="Visible"===$(this).find("span").text()?"hide":"publish",a=siteURL+"/panel/api/pages/"+n+"/"+currentURI;$.ajax({type:"POST",url:a}),$(this).find(".fa").toggleClass("fa-toggle-off fa-toggle-on"),$(this).find("span").text("hide"===n?"Invisible":"Visible"),setTimeout(function(){location.reload()},100)}),$(".panelbar--preview > a").on("click",function(e){e.preventDefault(),$(this).find("i").toggleClass("fa-compress fa-desktop");var n=$(".panelbar__preview"),a=n.find(".panelbar__preview--edit"),t=n.find(".panelbar__preview--view");n.toggleClass("show"),$("html, body").toggleClass("pb_disable"),$(".panelbar__preview iframe").attr("src",function(){return $(this).data("src")}),a.load(function(){PBPreviewInitEdit(a,t)}),t.load(function(){var n=t.contents();n.find("a").on("click",function(){e.preventDefault(),window.location=$(this).attr("href")})})})});